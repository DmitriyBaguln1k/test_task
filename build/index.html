<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>test</title>
     <link rel="stylesheet" href="css/style.css">
</head>
<header class="main-header">
    <section class="login">
        <a class="login-link" href="#">Вход</a>
    </section>
</header>
<body>
    <section class="modal modal-login">
  <h2>Личный кабинет</h2>
  <p class="modal-description">Введите пожалуйста свой логин и пароль</p>
  <form class="login-form" action="" method="post">
    <p>
      <label class="visually-hidden" for="user-login">Логин</label>
      <input class="login-icon-user" id="user-login" type="text" name="login" placeholder="Логин">
    </p>
    <p>
      <label class="visually-hidden" for="user-password">Пароль</label>
      <input class="login-icon-password" id="user-password" type="password" name="password" placeholder="Пароль">
    </p>
    <p class="login-help">
      <label class="login-checkbox">
        <input type="checkbox" name="remember" class="visually-hidden">
        <span class="checkbox-indicator"></span>
        Запомните меня
      </label>
      <a class="restore" href="#">Я забыл пароль!</a>
    </p>
    <button class="button" type="submit">Войти</button>
  </form>
  <button class="modal-close" type="button">Закрыть</button>
</section>
<script>
  var link = document.querySelector(".login-link");
  
  var popup = document.querySelector(".modal-login");
  var close = popup.querySelector(".modal-close");
  
  var form = popup.querySelector("form");
  var login = popup.querySelector("[name=login]");
  var password = popup.querySelector("[name=password]");
  
  var storage = localStorage.getItem("login");
  
  link.addEventListener("click", function (evt) {
    evt.preventDefault();
    popup.classList.add("modal-show");
    
    if (storage) {
      login.value = storage;
      password.focus();
    } else {
      login.focus();
    }
  });
  
  close.addEventListener("click", function (evt) {
    evt.preventDefault();
    popup.classList.remove("modal-show");
    popup.classList.remove("modal-error");
  });
  
  form.addEventListener("submit", function (evt) {
    if (!login.value || !password.value) {
      evt.preventDefault();
      popup.classList.remove("modal-error");
      popup.offsetWidth = popup.offsetWidth;
      popup.classList.add("modal-error");
    } else {
      localStorage.setItem("login", login.value);
    }
  });
  
  window.addEventListener("keydown", function (evt) {
    if (evt.keyCode === 27) {
      if (popup.classList.contains("modal-show")) {
        popup.classList.remove("modal-show");
        popup.classList.remove("modal-error");
      }
    }
  });
</script>
</body>
</html>